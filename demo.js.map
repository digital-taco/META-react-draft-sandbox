{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///../react-draft/src/components/Demo.js","webpack:///../react-draft/src/components/ErrorBoundary.js"],"names":["container","document","createElement","body","appendChild","setAttribute","deserializeAll","states","Object","fromEntries","entries","map","s","v","deserialize","Page","SelectedComponent","setSelectedComponent","useState","propStates","setPropStates","receiveMessage","type","data","Components","componentHash","handleMessage","parseMsg","useEffect","window","addEventListener","msg","top","state","removeEventListener","DemoWrapper","Wrapper","React","Fragment","meta","ReactDOM","render","getElementById","errorCss","messageCss","stackCSs","ErrorBoundary","Component","constructor","props","error","getDerivedStateFromError","hasError","message","stack","children"],"mappings":"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","file":"demo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn ","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport { msg, parseMsg, deserialize } from '../lib/helpers'\nimport Components from '../../out/master-exports'\nimport ErrorBoundary from './ErrorBoundary'\n\n// Add the app container so react can render\nconst container = document.createElement('div')\ndocument.body.appendChild(container)\ncontainer.setAttribute('id', 'demo')\n\nfunction deserializeAll(states) {\n  return Object.fromEntries(Object.entries(states).map(([s,v]) => [s, deserialize(v)]))\n}\n\nfunction Page() {\n  const [SelectedComponent, setSelectedComponent] = useState(null)\n  const [propStates, setPropStates] = useState({})\n\n  function receiveMessage(type, data) {\n    switch (type) {\n      // When a new component is selected in the explorer\n      case 'SELECTED_COMPONENT':\n        setSelectedComponent(() => Components[data.componentHash])\n        break\n\n      // When the prop states have updated\n      case 'PROP_STATES':\n        setPropStates(data)\n        break\n\n      default:\n    }\n  }\n\n  const handleMessage = parseMsg(receiveMessage)\n\n  // Notify DRAFT that the demo has initialized\n  useEffect(() => {\n    window.addEventListener('message', handleMessage)\n    msg(window.top, 'DEMO_INITIALIZED', { state: 'ready' })\n    return () => window.removeEventListener('message', handleMessage)\n  }, [])\n\n  // Wrap the demo in the provided Wrapper or just a fragment\n  const DemoWrapper = Components.Wrapper || React.Fragment\n\n  return SelectedComponent ? (\n    <ErrorBoundary key={SelectedComponent.meta.componentHash}>\n      <DemoWrapper>\n        {SelectedComponent && <SelectedComponent {...deserializeAll(propStates)} />}\n      </DemoWrapper>\n    </ErrorBoundary>\n  ) : null\n}\n\n// Render the demo in the dom\nReactDOM.render(<Page />, document.getElementById('demo'))\n","import React from 'react'\n/** @jsx jsx */\nimport { css, jsx } from '@emotion/core'\n\nconst errorCss = css`\n  background: #fcc;\n  color: #911;\n  padding: 20px;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu',\n    'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n`\n\nconst messageCss = css`\n  margin-bottom: 16px;\n  font-size: 20px;\n  font-weight: bold;\n`\n\nconst stackCSs = css`\n  white-space: pre-wrap;\n  overflow-wrap: break-word;\n`\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { error: '' }\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true, error }\n  }\n\n  render() {\n    return this.state.hasError ? (\n      <div css={errorCss}>\n        <div css={messageCss}>{this.state.error.message}</div>\n        <div css={stackCSs}>{this.state.error.stack}</div>\n      </div>\n    ) : (\n      this.props.children\n    )\n  }\n}\n"],"sourceRoot":""}